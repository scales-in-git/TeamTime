[gd_scene load_steps=16 format=4 uid="uid://5bga0ud1tinf"]

[ext_resource type="TileSet" uid="uid://7ewkkcpem306" path="res://tiles/TileTests.tres" id="1_topet"]
[ext_resource type="Texture2D" uid="uid://bdm5eipd1m8bw" path="res://Glow.png" id="2_8xuic"]
[ext_resource type="Texture2D" uid="uid://3hurbwdo1xm0" path="res://SquareGlow.png" id="3_oofvb"]
[ext_resource type="PackedScene" uid="uid://jhjkr5mcfjhg" path="res://Scenes/Mechanics/DeathPit/DeathPit.tscn" id="5_sjxbw"]
[ext_resource type="PackedScene" uid="uid://dxb7l54dt8jih" path="res://Scenes/Mechanics/EvilCamera/EvilCamera.tscn" id="6_l2mga"]
[ext_resource type="PackedScene" uid="uid://dvefjhvuqmubq" path="res://Scenes/Mechanics/BlockDetector/BlockDetector.tscn" id="9_8xuic"]
[ext_resource type="PackedScene" uid="uid://qgfao441huib" path="res://Scenes/Mechanics/Exit/ExitDoor/GoalDoor.tscn" id="10_1823e"]
[ext_resource type="Script" uid="uid://dugcuhx50s64n" path="res://Scenes/Utility/OnOffState.gd" id="10_sluq1"]
[ext_resource type="Resource" uid="uid://dk7njr5jptwoi" path="res://Scenes/Levels/Debug/RundimentaryLevels/level_c_camera.tres" id="11_sjxbw"]
[ext_resource type="PackedScene" uid="uid://c727a4v6bxv0" path="res://Scenes/Mechanics/InterLevel/InterLevelDoor.tscn" id="12_sjxbw"]
[ext_resource type="PackedScene" uid="uid://2u65lxhpmldx" path="res://Scenes/Mechanics/Entrance/DoorEntrance/DoorEntrance.tscn" id="13_l2mga"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_v53k6"]
size = Vector2(4356, 499)

[sub_resource type="Resource" id="Resource_sluq1"]
script = ExtResource("10_sluq1")
on = false
metadata/_custom_type_script = "uid://dugcuhx50s64n"

[sub_resource type="Resource" id="Resource_8ndp6"]
script = ExtResource("10_sluq1")
on = false
metadata/_custom_type_script = "uid://dugcuhx50s64n"

[sub_resource type="Resource" id="Resource_bt5x2"]
script = ExtResource("10_sluq1")
on = false
metadata/_custom_type_script = "uid://dugcuhx50s64n"

[node name="LevelTemplate" type="Node2D"]

[node name="ColorRect" type="ColorRect" parent="."]
offset_left = 1582.0
offset_top = -6972.0
offset_right = 8404.0
offset_bottom = 2996.0

[node name="BaseDarkness" type="CanvasModulate" parent="."]
color = Color(0.306923, 0.306923, 0.306923, 1)

[node name="TileMaps" type="Node2D" parent="."]

[node name="BackGround" type="TileMapLayer" parent="TileMaps"]
modulate = Color(0.603922, 0.603922, 0.603922, 1)
z_index = -10
tile_map_data = PackedByteArray("AAAaAP//AgADAAUAAAA=")
tile_set = ExtResource("1_topet")

[node name="MiddleGround-decor" type="TileMapLayer" parent="TileMaps"]
z_index = -10
tile_set = ExtResource("1_topet")

[node name="Lights" type="Node2D" parent="."]

[node name="DoorLight" type="PointLight2D" parent="Lights"]
shadow_enabled = true
texture = ExtResource("2_8xuic")

[node name="FloorLights" type="Node2D" parent="Lights"]
position = Vector2(0, 3)

[node name="Floor Light_1" type="PointLight2D" parent="Lights/FloorLights"]
position = Vector2(4638, -1513)
scale = Vector2(2.89337, 1.22465)
shadow_enabled = true
texture = ExtResource("3_oofvb")

[node name="Ceiling_Lights" type="Node2D" parent="Lights"]
position = Vector2(0, 3)
rotation = 3.14159

[node name="Ceiling Light_1" type="PointLight2D" parent="Lights/Ceiling_Lights"]
shadow_enabled = true
texture = ExtResource("3_oofvb")

[node name="Ignores BaseDarkness" type="CanvasLayer" parent="."]
layer = 0
follow_viewport_enabled = true

[node name="Enemies" type="Node2D" parent="Ignores BaseDarkness"]

[node name="Enviromental" type="Node2D" parent="Ignores BaseDarkness/Enemies"]

[node name="DeathPit" parent="Ignores BaseDarkness/Enemies/Enviromental" instance=ExtResource("5_sjxbw")]
visible = false
position = Vector2(2574, 1056)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Ignores BaseDarkness/Enemies/Enviromental/DeathPit"]
position = Vector2(8, -347.5)
shape = SubResource("RectangleShape2D_v53k6")

[node name="Interactables" type="Node2D" parent="Ignores BaseDarkness/Enemies"]

[node name="EvilCamera" parent="Ignores BaseDarkness/Enemies/Interactables" instance=ExtResource("6_l2mga")]
visible = false

[node name="TileMaps" type="Node2D" parent="Ignores BaseDarkness"]

[node name="BackGround" type="TileMapLayer" parent="Ignores BaseDarkness/TileMaps"]
tile_map_data = PackedByteArray("AAAnAO7/AgAFAAUAAAAqAO7/AgAFAAUAAAAtAO7/AgAFAAUAAAAwAO7/AgAFAAUAAAAzAO7/AgAFAAUAAAA2AO7/AgAFAAUAAAAoAPH/AgABAAUAAAAxAPH/AgAEAAUAAAAyAPH/AgACAAYAAAA=")
tile_set = ExtResource("1_topet")

[node name="MiddleGround" type="TileMapLayer" parent="Ignores BaseDarkness/TileMaps"]
tile_set = ExtResource("1_topet")

[node name="ForeGround" type="TileMapLayer" parent="Ignores BaseDarkness/TileMaps"]
z_index = 10
tile_map_data = PackedByteArray("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AAAkAOv/AgACAAMAAAAkAOz/AgACAAMAAAAkAO3/AgACAAMAAAAlAOr/AgACAAMAAAAmAOr/AgACAAMAAAAnAOr/AgACAAMAAAAoAOr/AgACAAMAAAApAOr/AgACAAMAAAAqAOr/AgACAAMAAAArAOr/AgACAAMAAAAsAOr/AgACAAMAAAAtAOr/AgACAAMAAAAuAOr/AgACAAMAAAAvAOr/AgACAAMAAAAwAOr/AgACAAMAAAAxAOr/AgACAAMAAAAyAOr/AgACAAMAAAAzAOr/AgACAAMAAAA0AOr/AgACAAMAAAA1AOr/AgACAAMAAAA2AOr/AgACAAMAAAA3AOr/AgACAAMAAAA4AOr/AgACAAMAAAA5AOr/AgACAAMAAAA5AOv/AgACAAMAAAA5AOz/AgACAAMAAAA5AO3/AgACAAMAAAA6AOr/AgACAAMAAAA7AOr/AgACAAMAAAA8AOr/AgACAAMAAAA9AOr/AgACAAMAAAA+AOr/AgACAAMAAAA/AOr/AgACAAMAAABAAOr/AgACAAMAAABBAOr/AgACAAMAAABBAOv/AgACAAMAAABBAOz/AgACAAMAAABBAO3/AgACAAMAAAAkAPv/AgACAAMAAAAkAPz/AgACAAMAAAAkAP3/AgACAAMAAAAkAP7/AgACAAMAAAAkAP//AgACAAMAAAA2AP7/AgACAAMAAAA2AP//AgACAAMAAAA2APv/AgACAAMAAAA2APz/AgACAAMAAAA2AP3/AgACAAMAAAA6APn/AgACAAMAAAA2APn/AgACAAMAAAA2APr/AgACAAMAAAA3APn/AgACAAMAAAA4APn/AgACAAMAAAA=")
tile_set = ExtResource("1_topet")

[node name="Door" parent="Ignores BaseDarkness" instance=ExtResource("10_1823e")]
position = Vector2(6376, -392)
state_manager = ExtResource("11_sjxbw")
scene = "uid://5o7so3pvqfpq"

[node name="Door-InterLevel" parent="Ignores BaseDarkness" instance=ExtResource("12_sjxbw")]
position = Vector2(3494, 3)
active_colour = Color(1, 1, 0.192157, 1)

[node name="Door-InterLevel2" parent="Ignores BaseDarkness" instance=ExtResource("12_sjxbw")]
position = Vector2(3922, 3)
active_colour = Color(1, 1, 0.192157, 1)

[node name="Door-InterLevel3" parent="Ignores BaseDarkness" instance=ExtResource("12_sjxbw")]
position = Vector2(5246, 3)
active_colour = Color(1, 0.337255, 1, 1)

[node name="Door-InterLevel4" parent="Ignores BaseDarkness" instance=ExtResource("12_sjxbw")]
position = Vector2(5644, 0)
active_colour = Color(1, 0.337255, 1, 1)

[node name="DoorEntrance" parent="Ignores BaseDarkness" instance=ExtResource("13_l2mga")]
position = Vector2(2609, 0)
player_max_blocks = 1

[node name="BlockDetector" parent="." instance=ExtResource("9_8xuic")]

[node name="BlockDetector3" parent="BlockDetector" instance=ExtResource("9_8xuic")]
position = Vector2(5796, -100)
scale = Vector2(4, 1)
on_off_state_manager = SubResource("Resource_sluq1")

[node name="BlockDetector2" parent="BlockDetector" instance=ExtResource("9_8xuic")]
position = Vector2(4595, -100)
scale = Vector2(4, 1)
on_off_state_manager = SubResource("Resource_8ndp6")

[node name="BlockDetector" parent="BlockDetector" instance=ExtResource("9_8xuic")]
position = Vector2(3092, -100)
on_off_state_manager = SubResource("Resource_bt5x2")
